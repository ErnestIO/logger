machine:
  environment:
    ROOTPATH: /home/ubuntu/.go_workspace/src/github.com/ernestio

dependencies:
  pre:
    - mkdir -p $ROOTPATH/
    - rm -rf $ROOTPATH/logger
    - cp -R /home/ubuntu/logger $ROOTPATH/logger
    - cd $ROOTPATH/logger/ && make dev-deps
    - rm -rf $ROOTPATH/toolset/ && git clone git@github.com:ernestio/toolset.git $ROOTPATH/toolset/
    - cd $ROOTPATH/toolset/ernestci/ && bundle install

test:
  override:
    - cd $ROOTPATH/logger/ && make test
    - ruby $ROOTPATH/toolset/ernestci/run.rb .ernest-ci
    - cd $ROOTPATH/logger/ && make lint
